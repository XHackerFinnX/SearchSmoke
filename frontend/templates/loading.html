<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>SearchSmoke Loading</title>
        <style>
            body,
            html {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(180deg, #0a0a0a 0%, #1a1a1a 100%);
                overflow: hidden;
                font-family: "Arial Black", Arial, sans-serif;
            }

            canvas {
                display: block;
                filter: blur(3px) contrast(1.05);
            }

            /* Контейнер для UI поверх дыма */
            .loading-ui {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 100;
                text-align: center;
                pointer-events: none;
            }

            /* Заголовок SEARCHSMOKE */
            .title {
                font-size: clamp(30px, 8vw, 120px);
                font-weight: 900;
                background: linear-gradient(45deg, #ffffff, #e0e0e0, #b0b0b0);
                background-size: 300% 300%;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                letter-spacing: 0.1em;
                text-transform: uppercase;
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.3),
                    0 0 20px rgba(255, 255, 255, 0.2),
                    0 0 40px rgba(255, 255, 255, 0.1);
                animation: titleGlow 3s ease-in-out infinite alternate,
                    titleShift 4s ease-in-out infinite;
                margin-bottom: 20px;
            }

            @keyframes titleGlow {
                0% {
                    text-shadow: 0 0 10px rgba(255, 255, 255, 0.3),
                        0 0 20px rgba(255, 255, 255, 0.2),
                        0 0 40px rgba(255, 255, 255, 0.1);
                }
                100% {
                    text-shadow: 0 0 20px rgba(255, 255, 255, 0.6),
                        0 0 40px rgba(255, 255, 255, 0.4),
                        0 0 80px rgba(255, 255, 255, 0.2);
                }
            }

            @keyframes titleShift {
                0%,
                100% {
                    background-position: 0% 50%;
                }
                50% {
                    background-position: 100% 50%;
                }
            }

            /* Контейнер прогресс-бара */
            .progress-container {
                width: clamp(200px, 40vw, 500px);
                height: 8px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 10px;
                padding: 4px;
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
                margin: 0 auto;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }

            /* Полоска загрузки */
            .progress-bar {
                height: 100%;
                background: linear-gradient(90deg, #00ff88);
                background-size: 200% 100%;
                border-radius: 6px;
                width: 0%;
                animation: progressFill 3s cubic-bezier(0.25, 0.46, 0.45, 0.94)
                        forwards,
                    progressShine 2s infinite linear;
                box-shadow: 0 0 10px rgba(0, 255, 136, 0.5),
                    inset 0 0 10px rgba(255, 255, 255, 0.3);
            }

            @keyframes progressFill {
                0% {
                    width: 0%;
                }
                100% {
                    width: 100%;
                }
            }

            @keyframes progressShine {
                0% {
                    background-position: -200% 0;
                }
                100% {
                    background-position: 200% 0;
                }
            }

            /* Текст процента (опционально) */
            .progress-text {
                color: rgba(255, 255, 255, 0.7);
                font-size: 14px;
                margin-top: 15px;
                font-family: "Courier New", monospace;
                letter-spacing: 2px;
            }
        </style>
    </head>
    <body>
        <canvas id="smokeCanvas"></canvas>

        <div class="loading-ui">
            <h1 class="title">SEARCHSMOKE</h1>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="progress-text">Загрузка...</div>
        </div>

        <script>
            const canvas = document.getElementById("smokeCanvas");
            const ctx = canvas.getContext("2d");
            const progressBar = document.getElementById("progressBar");

            let width, height;

            function resize() {
                width = window.innerWidth;
                height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;
            }
            window.addEventListener("resize", resize);
            resize();

            const config = {
                particleCount: 400,
                waveDepth: 1500,
                riseSpeed: 3,
                growth: 0.8,
                color: "200, 200, 200",
            };

            // Текстура дыма
            const puffSize = 100;
            const puffCanvas = document.createElement("canvas");
            const puffCtx = puffCanvas.getContext("2d");
            puffCanvas.width = puffSize;
            puffCanvas.height = puffSize;

            const gradient = puffCtx.createRadialGradient(
                50,
                50,
                0,
                50,
                50,
                50
            );
            gradient.addColorStop(0, `rgba(${config.color}, 0.08)`);
            gradient.addColorStop(0.5, `rgba(${config.color}, 0.02)`);
            gradient.addColorStop(1, `rgba(${config.color}, 0)`);

            puffCtx.fillStyle = gradient;
            puffCtx.fillRect(0, 0, puffSize, puffSize);

            class Particle {
                constructor() {
                    this.x = Math.random() * width;
                    this.y = height + Math.random() * config.waveDepth;
                    this.vy = -(config.riseSpeed + Math.random() * 2);
                    this.vx = (Math.random() - 0.5) * 2;
                    this.size = 100 + Math.random() * 100;
                    this.angle = Math.random() * Math.PI * 2;
                    this.spin = (Math.random() - 0.5) * 0.03;
                    this.alpha = 0;
                    this.maxAlpha = 0.3 + Math.random() * 0.5;
                }

                update() {
                    this.y += this.vy;
                    this.x += this.vx;
                    this.angle += this.spin;
                    this.size += config.growth;

                    if (this.y > height - 100) {
                        this.alpha = Math.min(
                            this.alpha + 0.008,
                            this.maxAlpha
                        );
                    } else if (this.y < height * 0.3) {
                        this.alpha -= 0.012;
                    }
                }

                draw() {
                    if (this.alpha <= 0) return;

                    ctx.save();
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.angle);
                    ctx.globalAlpha = Math.max(0, this.alpha);
                    ctx.drawImage(
                        puffCanvas,
                        -this.size / 2,
                        -this.size / 2,
                        this.size,
                        this.size
                    );
                    ctx.restore();
                }
            }

            let particles = [];

            for (let i = 0; i < config.particleCount; i++) {
                particles.push(new Particle());
            }

            function animate() {
                ctx.fillStyle = "#0a0a0a";
                ctx.fillRect(0, 0, width, height);

                let activeParticles = 0;

                for (let i = 0; i < particles.length; i++) {
                    const p = particles[i];

                    if (p.alpha > -0.1) {
                        p.update();
                        p.draw();
                        activeParticles++;
                    }
                }

                if (activeParticles > 0) {
                    requestAnimationFrame(animate);
                } else {
                    // Когда дым закончился, можно скрыть UI или перейти к контенту
                    console.log("Loading complete!");
                }
            }

            animate();
        </script>
    </body>
</html>
